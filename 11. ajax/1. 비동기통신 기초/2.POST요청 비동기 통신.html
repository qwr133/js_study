<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        label{
            display: block;
        }
    </style>
</head>
<body>
    <div class="register">
        <label>
            # 회원번호 : <input type="text" name="id">
        </label>
        <label>
            # 계정명 : <input type="text" name="account">
        </label>
        <label>
            # 이름 : <input type="text" name="userName">
        </label>
        <label>
            # 주소 : <input type="text" name="address">
        </label>
        <label>
            <button id="insert">회원가입</button>
        </label>
    </div>

    <script>
        const $regBtn = document.getElementById('insert');
        $regBtn.onclick= e=> {
            console.log('회원가입 클릭!');

            //서버에 post요청을 보내서 저장시켜야 함
             const xhr = new XMLHttpRequest();
             xhr.open('post', 'http://localhost:5000/users')

             //요청데이터 만들기 - 요청시 서버로 보내는 데이터(=payload)
                const userPostPayload= {
                    id: document.querySelector('input[name=id]').value,
                    account: document.querySelector('input[name=account]').value,
                    userName: document.querySelector('input[name=userName]').value,
                    address: document.querySelector('input[name=address]').value,
                };
                console.log(userPostPayload); 

                //요청헤더에 mime type 설정 -- 내가 json임을 알려줘야함
                xhr.setRequestHeader('content-type', 'application/json')

             //요청보내기 js->json으로 바꾸기
             xhr.send(JSON.stringify(userPostPayload));
        }
    </script>
</body>
</html>